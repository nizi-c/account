# 需求文档

## 简介

收支记账APP是一个用于记录和管理个人日常收入与支出的移动应用程序。该系统允许用户分类记录交易数据，查看收支流水，进行多维度统计分析，并通过情绪记账和成就系统提升用户体验。应用需要支持手机和平板两种屏幕尺寸。

## 术语表

- **系统（System）**: 收支记账APP应用程序
- **用户（User）**: 使用该应用记录和管理收支的个人
- **交易记录（Transaction）**: 单条收入或支出记录，包含金额、用途、日期、分类、情绪等信息
- **分类（Category）**: 交易的类型分组，如餐饮、交通、工资等
- **情绪标签（Mood Tag）**: 用户对交易的情绪反馈，包括满意、后悔、惊喜
- **成就（Achievement）**: 用户完成特定行为后解锁的奖励标识
- **汇总（Summary）**: 按时间维度（日、周、月、年）统计的收支总额
- **流水记录（Transaction History）**: 按时间顺序排列的交易记录列表
- **侧滑删除（Swipe to Delete）**: 通过手势在列表项上滑动以删除该项的交互方式
- **响应式布局（Responsive Layout）**: 能够适应不同屏幕尺寸的界面设计

## 需求

### 需求 1：交易记录管理

**用户故事：** 作为用户，我想要添加和管理收支交易记录，以便跟踪我的日常财务活动。

#### 验收标准

1. WHEN 用户输入金额、用途、日期、分类信息并提交 THEN 系统 SHALL 创建新的交易记录并保存到本地存储
2. WHEN 用户在交易列表上执行侧滑手势 THEN 系统 SHALL 显示删除选项
3. WHEN 用户确认删除操作 THEN 系统 SHALL 从存储中移除该交易记录并更新界面显示
4. WHEN 用户添加交易记录时 THEN 系统 SHALL 验证金额为正数且日期格式有效
5. WHEN 交易记录被创建或删除 THEN 系统 SHALL 立即更新相关的汇总统计数据

### 需求 2：分类系统

**用户故事：** 作为用户，我想要为每笔交易选择分类，以便更好地组织和分析我的收支情况。

#### 验收标准

1. WHEN 用户创建交易记录 THEN 系统 SHALL 提供预定义的收入和支出分类选项供选择
2. WHEN 用户选择收入类型 THEN 系统 SHALL 显示收入相关分类（如工资、奖金、投资收益等）
3. WHEN 用户选择支出类型 THEN 系统 SHALL 显示支出相关分类（如餐饮、交通、购物、娱乐等）
4. WHEN 交易记录包含分类信息 THEN 系统 SHALL 在统计分析中按分类进行汇总

### 需求 3：流水记录显示

**用户故事：** 作为用户，我想要查看日和月的收支流水记录，以便了解特定时间段的财务状况。

#### 验收标准

1. WHEN 用户访问首页 THEN 系统 SHALL 显示当日的所有交易记录列表
2. WHEN 用户访问首页 THEN 系统 SHALL 显示当日收入总额和支出总额
3. WHEN 用户切换到月视图 THEN 系统 SHALL 显示当月的所有交易记录列表
4. WHEN 用户切换到月视图 THEN 系统 SHALL 显示当月收入总额和支出总额
5. WHEN 交易记录列表显示时 THEN 系统 SHALL 按时间倒序排列（最新的在前）

### 需求 4：多维度汇总统计

**用户故事：** 作为用户，我想要按周、月、年查看收支汇总，以便分析不同时间段的财务趋势。

#### 验收标准

1. WHEN 用户选择周汇总视图 THEN 系统 SHALL 计算并显示当周的收入总额、支出总额和净收支
2. WHEN 用户选择月汇总视图 THEN 系统 SHALL 计算并显示当月的收入总额、支出总额和净收支
3. WHEN 用户选择年汇总视图 THEN 系统 SHALL 计算并显示当年的收入总额、支出总额和净收支
4. WHEN 用户切换时间维度 THEN 系统 SHALL 在500毫秒内完成数据计算并更新显示
5. WHEN 显示汇总数据时 THEN 系统 SHALL 同时显示各分类的占比信息

### 需求 5：高级查询功能

**用户故事：** 作为用户，我想要根据多种条件筛选交易记录，以便快速找到特定的财务信息。

#### 验收标准

1. WHEN 用户输入金额范围条件 THEN 系统 SHALL 返回金额在该范围内的所有交易记录
2. WHEN 用户输入用途关键词 THEN 系统 SHALL 返回用途描述包含该关键词的所有交易记录
3. WHEN 用户选择日期范围 THEN 系统 SHALL 返回日期在该范围内的所有交易记录
4. WHEN 用户选择特定分类 THEN 系统 SHALL 返回属于该分类的所有交易记录
5. WHEN 用户同时应用多个筛选条件 THEN 系统 SHALL 返回满足所有条件的交易记录
6. WHEN 查询结果为空 THEN 系统 SHALL 显示友好的空状态提示信息

### 需求 6：数据可视化

**用户故事：** 作为用户，我想要通过图表查看收支数据，以便更直观地理解我的财务状况。

#### 验收标准

1. WHEN 用户访问统计页面 THEN 系统 SHALL 显示支出分类的饼图展示各分类占比
2. WHEN 用户访问统计页面 THEN 系统 SHALL 显示收支趋势的折线图展示时间序列变化
3. WHEN 用户点击饼图的某个分类扇区 THEN 系统 SHALL 显示该分类的详细交易列表
4. WHEN 折线图数据更新时 THEN 系统 SHALL 使用平滑动画过渡到新数据
5. WHEN 图表显示时 THEN 系统 SHALL 确保图例、标签和数值清晰可读

### 需求 7：情绪记账功能

**用户故事：** 作为用户，我想要为每笔消费记录情绪标签，以便反思我的消费心理和习惯。

#### 验收标准

1. WHEN 用户创建交易记录 THEN 系统 SHALL 提供三种情绪选项：满意😊、后悔😟、惊喜🎉
2. WHEN 用户选择情绪标签 THEN 系统 SHALL 将情绪信息与交易记录关联保存
3. WHEN 用户查看交易记录 THEN 系统 SHALL 在记录旁显示对应的情绪图标
4. WHEN 用户访问情绪日历 THEN 系统 SHALL 以日历形式展示每日的主要消费情绪
5. WHEN 用户点击情绪日历中的某一天 THEN 系统 SHALL 显示该天所有带情绪标签的交易记录

### 需求 8：成就系统

**用户故事：** 作为用户，我想要通过完成记账目标解锁成就，以便激励我保持良好的记账习惯。

#### 验收标准

1. WHEN 用户连续7天记账 THEN 系统 SHALL 解锁"连续记账7天"成就并显示通知
2. WHEN 用户当月支出未超过预算 THEN 系统 SHALL 解锁"月度预算控制达人"成就
3. WHEN 用户餐饮支出占比低于合理阈值 THEN 系统 SHALL 解锁"餐饮消费合理化"成就
4. WHEN 用户解锁新成就 THEN 系统 SHALL 在成就页面显示该成就的图标和描述
5. WHEN 用户访问成就页面 THEN 系统 SHALL 显示已解锁和未解锁的所有成就及其进度

### 需求 9：用户界面设计

**用户故事：** 作为用户，我想要使用美观且易用的界面，以便获得良好的应用体验。

#### 验收标准

1. WHEN 用户打开应用 THEN 系统 SHALL 显示清晰的首页界面，包含当日收支概览和快速添加按钮
2. WHEN 用户点击添加按钮 THEN 系统 SHALL 显示结构化的输入表单，包含所有必填字段
3. WHEN 用户访问查询页面 THEN 系统 SHALL 提供直观的筛选控件和清晰的结果展示
4. WHEN 界面元素布局时 THEN 系统 SHALL 确保重要信息突出显示且操作按钮易于触达
5. WHEN 用户执行操作 THEN 系统 SHALL 提供即时的视觉反馈（如按钮状态变化、加载指示器）
6. WHEN 界面显示时 THEN 系统 SHALL 使用一致的配色方案、字体和间距

### 需求 10：响应式布局

**用户故事：** 作为用户，我想要在手机和平板上都能流畅使用应用，以便在不同设备上管理我的财务。

#### 验收标准

1. WHEN 应用在手机屏幕上运行 THEN 系统 SHALL 使用单列布局优化垂直空间利用
2. WHEN 应用在平板屏幕上运行 THEN 系统 SHALL 使用多列布局展示更多信息
3. WHEN 屏幕方向改变时 THEN 系统 SHALL 在300毫秒内重新布局界面元素
4. WHEN 在不同设备上显示图表时 THEN 系统 SHALL 调整图表尺寸以适应屏幕宽度
5. WHEN 在平板上显示列表时 THEN 系统 SHALL 利用额外空间显示更多列信息或侧边栏

### 需求 11：数据持久化

**用户故事：** 作为用户，我想要我的数据被安全保存，以便在关闭应用后不会丢失。

#### 验收标准

1. WHEN 用户创建或修改交易记录 THEN 系统 SHALL 立即将数据保存到本地存储
2. WHEN 应用启动时 THEN 系统 SHALL 从本地存储加载所有历史交易记录
3. WHEN 数据保存失败 THEN 系统 SHALL 显示错误提示并保留用户输入的数据
4. WHEN 数据加载失败 THEN 系统 SHALL 显示错误信息并提供重试选项
5. WHEN 存储的数据结构发生变化 THEN 系统 SHALL 执行数据迁移以保持兼容性
